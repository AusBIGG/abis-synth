# baseURI: https://linked.data.gov.au/def/tern-dummy-shapes

@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix prov: <http://www.w3.org/ns/prov#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix sosa: <http://www.w3.org/ns/sosa/> .
@prefix tern: <https://w3id.org/tern/ontologies/tern/> .
@prefix terndsh: <https://linked.data.gov.au/def/tern-dummy-shapes/> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .


<https://linked.data.gov.au/def/tern-dummy-shapes>
    a owl:Ontology ;
    rdfs:label "Dummy TERN Ontology Shapes" ;
    rdfs:comment "Dummy Shapes emulating some parts of the TERN Ontology's shapes" ;
    dcterms:creator <https://linked.data.gov.au/org/surround> ;
    dcterms:created "2022-01-03"^^xsd:date ;
    dcterms:modified "2022-01-03"^^xsd:date ;
.

terndsh:sampling-class
	a sh:NodeShape ;
	sh:targetClass tern:Sampling ;
    sh:property [ 
        a sh:PropertyShape ;
        sh:class tern:SiteVisit ;
        sh:maxCount 1 ;
        sh:nodeKind sh:IRI ;
        sh:path tern:hasSiteVisit ;
    ],
    [ 
        a sh:PropertyShape ;
        sh:maxCount 1 ;
        sh:name "type" ;
        sh:nodeKind sh:IRI ;
        sh:path dcterms:type ;
    ],
    [ 
        a sh:PropertyShape ;
        sh:datatype xsd:string ;
        sh:maxCount 1 ;
        sh:path rdfs:comment ;
    ],
    [ 
        a sh:PropertyShape ;
        sh:class <https://w3id.org/tern/ontologies/loc/Geometry> ;
        sh:name "has geometry" ;
        sh:nodeKind sh:IRI ;
        sh:path <http://www.opengis.net/ont/geosparql#hasGeometry> 
    ],
    # SURROUND: allow either a sh:class tern:FeatureOfInterest
    # OR just an IRI with a linked.dat.gov.au/dataset/bdr/site/... IRI
    # [
    #    a sh:PropertyShape ;
    #    sh:class tern:FeatureOfInterest ;
    #    sh:maxCount 1 ;
    #    sh:minCount 1 ;
    #    sh:name "has feature of interest" ;
    #    sh:nodeKind sh:IRI ;
    #    sh:path sosa:hasFeatureOfInterest ;
    # ],
    [
        a sh:PropertyShape ;
        sh:path sosa:hasFeatureOfInterest ;
        sh:name "has feature of interest" ;
        sh:maxCount 1 ;
        sh:minCount 1 ;
        sh:nodeKind sh:IRI ;
        sh:or (
            [ sh:class tern:FeatureOfInterest ]
            [ sh:pattern "^https://linked.data.gov.au/dataset/bdr/site/" ]
        ) ;
        sh:message "A tern:Sampling must indicate one and only one sosa:hasFeatureOfInterest property either a fully-described tern:FeatureOfInterest class instance or an IRI of the pattern <https://linked.data.gov.au/dataset/bdr/site/*>, which is a tern:Site within the Biodiversity Data Repository"
    ],
    [ 
        a sh:PropertyShape ;
        sh:description "The type of sampling act." ;
        sh:maxCount 1 ;
        sh:nodeKind sh:IRI ;
        sh:path tern:samplingType ;
    ],
    [ 
        a sh:PropertyShape ;
        sh:name "was attributed to" ;
        sh:nodeKind sh:IRI ;
        sh:or ( [ sh:class <https://w3id.org/tern/ontologies/org/Person> ] [ ] ) ;
        sh:path prov:wasAssociatedWith ;
    ],
    [ 
        a sh:PropertyShape ;
        sh:class tern:Sampler ;
        sh:description "Relation linking an act of Sampling to the Sampler (sampling device or entity) that made it." ;
        sh:name "made by sampler" ;
        sh:nodeKind sh:IRI ;
        sh:path sosa:madeBySampler ;
    ],
    [ 
        a sh:PropertyShape ;
        sh:maxCount 1 ;
        sh:minCount 1 ;
        sh:name "used procedure" ;
        sh:nodeKind sh:IRI ;
        sh:path sosa:usedProcedure ;
    ],
    [ 
        a sh:PropertyShape ;
        sh:class tern:Sample ;
        sh:minCount 1 ;
        sh:name "has result" ;
        sh:nodeKind sh:IRI ;
        sh:path sosa:hasResult ;
    ],
    [ 
        a sh:PropertyShape ;
        sh:class tern:Instrument ;
        sh:nodeKind sh:IRI ;
        sh:path tern:usedInstrument ;
    ],
    [ 
        a sh:PropertyShape ;
        sh:datatype xsd:string ;
        sh:name "identifier" ;
        sh:path dcterms:identifier ;
    ],
    [ 
        a sh:PropertyShape ;
        # SURROUND: boraden acceptable datatypes
        # sh:datatype xsd:dateTime ;
        sh:or (
            [ sh:datatype xsd:dateTime ]
            [ sh:datatype xsd:date ]
            [ sh:datatype xsd:dateTimeStamp ]
        ) ;
        sh:maxCount 1 ;
        sh:minCount 1 ;
        sh:name "result time" ;
        sh:path sosa:resultTime ;
    ] ;
.
